jQuery(document).ready(function(a){a("body").on("submit.mailster","form.mailster-ajax-form",function(e){e.preventDefault();var d=a(this),f=d.serialize(),g=a('<div class="mailster-form-info"></div>'),h;if(a.isFunction(window.mailster_pre_submit)){h=window.mailster_pre_submit.call(this,f);if(h===false){return false}if(typeof h!=="undefined"){f=h}}d.addClass("loading").find(".submit-button").prop("disabled",true);a.post(d.attr("action"),f,b,"JSON").fail(function(k,m,l){if(m=="error"&&!l){return}var i=k.responseText,c;try{c=a.parseJSON(k.responseText)}catch(j){c={html:"There was an error while parsing the response: <code>"+k.responseText+"</code>",success:false}}b(c);if(console){console.error(k.responseText)}});function b(c){d.removeClass("loading has-errors").find("div.mailster-wrapper").removeClass("error");d.find(".mailster-form-info").remove();if(a.isFunction(window.mailster_post_submit)){h=window.mailster_post_submit.call(d[0],c);if(h===false){return false}if(typeof h!=="undefined"){c=h}}d.find(".submit-button").prop("disabled",false);if(c.html){g.html(c.html)}if(a(document).scrollTop()<d.offset().top){g.prependTo(d)}else{g.appendTo(d)}if(c.success){if(!d.is(".is-profile")){d.find(".mailster-form-fields").slideUp(100).find(".mailster-wrapper").find(":input").prop("disabled",true).filter(".input").val("")}(c.redirect)?location.href=c.redirect:g.show().addClass("success")}else{if(c.fields){a.each(c.fields,function(i){d.addClass("has-errors").find(".mailster-"+i+"-wrapper").addClass("error")})}g.show().addClass("error")}}})});